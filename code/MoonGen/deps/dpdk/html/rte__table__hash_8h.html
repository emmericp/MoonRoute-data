<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>DPDK: lib/librte_table/rte_table_hash.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_fcaecf9e47d3074427ceb27ca105ed74.html">lib</a></li><li class="navelem"><a class="el" href="dir_2f97e1d9ca91756d5f72b6c98811fd92.html">librte_table</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">rte_table_hash.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="rte__table_8h.html">rte_table.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__ext__params.html">rte_table_hash_ext_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__lru__params.html">rte_table_hash_lru_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__key8__lru__params.html">rte_table_hash_key8_lru_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__key8__ext__params.html">rte_table_hash_key8_ext_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__key16__lru__params.html">rte_table_hash_key16_lru_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__key16__ext__params.html">rte_table_hash_key16_ext_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__key32__lru__params.html">rte_table_hash_key32_lru_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__table__hash__key32__ext__params.html">rte_table_hash_key32_ext_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6633f20f58e850abc3d1650af5d900da"><td class="memItemLeft" align="right" valign="top">typedef uint64_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#a6633f20f58e850abc3d1650af5d900da">rte_table_hash_op_hash</a>) (void *key, uint32_t key_size, uint64_t seed)</td></tr>
<tr class="separator:a6633f20f58e850abc3d1650af5d900da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad7d24416b687345b68e9820d65e7e5d2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#ad7d24416b687345b68e9820d65e7e5d2">rte_table_hash_ext_ops</a></td></tr>
<tr class="separator:ad7d24416b687345b68e9820d65e7e5d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcbd6003c5b6666ba1eed226eeaefd3f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#adcbd6003c5b6666ba1eed226eeaefd3f">rte_table_hash_ext_dosig_ops</a></td></tr>
<tr class="separator:adcbd6003c5b6666ba1eed226eeaefd3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34bd949f43231bf0ce977b90fc02a0c1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#a34bd949f43231bf0ce977b90fc02a0c1">rte_table_hash_lru_ops</a></td></tr>
<tr class="separator:a34bd949f43231bf0ce977b90fc02a0c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7812dfb5832420395fb16489cee12b3e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#a7812dfb5832420395fb16489cee12b3e">rte_table_hash_lru_dosig_ops</a></td></tr>
<tr class="separator:a7812dfb5832420395fb16489cee12b3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc5b1949c158c2343327a228db0f0fd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#abdc5b1949c158c2343327a228db0f0fd">rte_table_hash_key8_lru_ops</a></td></tr>
<tr class="separator:abdc5b1949c158c2343327a228db0f0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af410aef6de02b248f1dd04c6310ed9d9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#af410aef6de02b248f1dd04c6310ed9d9">rte_table_hash_key8_lru_dosig_ops</a></td></tr>
<tr class="separator:af410aef6de02b248f1dd04c6310ed9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea4db38125897454fcfe2eb6100c329"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#aeea4db38125897454fcfe2eb6100c329">rte_table_hash_key8_ext_ops</a></td></tr>
<tr class="separator:aeea4db38125897454fcfe2eb6100c329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c1c0da2ab6107aeb9d7e865f3dff96"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#ad0c1c0da2ab6107aeb9d7e865f3dff96">rte_table_hash_key8_ext_dosig_ops</a></td></tr>
<tr class="separator:ad0c1c0da2ab6107aeb9d7e865f3dff96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522d50bccff9cee7b2902268421b74bd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#a522d50bccff9cee7b2902268421b74bd">rte_table_hash_key16_lru_ops</a></td></tr>
<tr class="separator:a522d50bccff9cee7b2902268421b74bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac269e0bcf50c9af8feffe44e57101a55"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#ac269e0bcf50c9af8feffe44e57101a55">rte_table_hash_key16_ext_ops</a></td></tr>
<tr class="separator:ac269e0bcf50c9af8feffe44e57101a55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32f0eb02dbdab6fba2025d7ae8bede4d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#a32f0eb02dbdab6fba2025d7ae8bede4d">rte_table_hash_key32_lru_ops</a></td></tr>
<tr class="separator:a32f0eb02dbdab6fba2025d7ae8bede4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a634b2c3c679da495bf8bdcd03e0ed0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__table__hash_8h.html#a9a634b2c3c679da495bf8bdcd03e0ed0">rte_table_hash_key32_ext_ops</a></td></tr>
<tr class="separator:a9a634b2c3c679da495bf8bdcd03e0ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RTE Table Hash</p>
<p>These tables use the exact match criterion to uniquely associate data to lookup keys.</p>
<p>Use-cases: Flow classification table, Address Resolution Protocol (ARP) table</p>
<p>Hash table types:</p><ol type="1">
<li>Entry add strategy on bucket full: a. Least Recently Used (LRU): One of the existing keys in the bucket is deleted and the new key is added in its place. The number of keys in each bucket never grows bigger than 4. The logic to pick the key to be dropped from the bucket is LRU. The hash table lookup operation maintains the order in which the keys in the same bucket are hit, so every time a key is hit, it becomes the new Most Recently Used (MRU) key, i.e. the most unlikely candidate for drop. When a key is added to the bucket, it also becomes the new MRU key. When a key needs to be picked and dropped, the most likely candidate for drop, i.e. the current LRU key, is always picked. The LRU logic requires maintaining specific data structures per each bucket. b. Extendible bucket (ext): The bucket is extended with space for 4 more keys. This is done by allocating additional memory at table init time, which is used to create a pool of free keys (the size of this pool is configurable and always a multiple of 4). On key add operation, the allocation of a group of 4 keys only happens successfully within the limit of free keys, otherwise the key add operation fails. On key delete operation, a group of 4 keys is freed back to the pool of free keys when the key to be deleted is the only key that was used within its group of 4 keys at that time. On key lookup operation, if the current bucket is in extended state and a match is not found in the first group of 4 keys, the search continues beyond the first group of 4 keys, potentially until all keys in this bucket are examined. The extendible bucket logic requires maintaining specific data structures per table and per each bucket.</li>
<li>Key signature computation: a. Pre-computed key signature: The key lookup operation is split between two CPU cores. The first CPU core (typically the CPU core performing packet RX) extracts the key from the input packet, computes the key signature and saves both the key and the key signature in the packet buffer as packet meta-data. The second CPU core reads both the key and the key signature from the packet meta-data and performs the bucket search step of the key lookup operation. b. Key signature computed on lookup (do-sig): The same CPU core reads the key from the packet meta-data, uses it to compute the key signature and also performs the bucket search step of the key lookup operation.</li>
<li>Key size: a. Configurable key size b. Single key size (8-byte, 16-byte or 32-byte key size) </li>
</ol>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a6633f20f58e850abc3d1650af5d900da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t(* rte_table_hash_op_hash) (void *key, uint32_t key_size, uint64_t seed)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hash function </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="adcbd6003c5b6666ba1eed226eeaefd3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_ext_dosig_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extendible bucket hash table operations for key signature computed on lookup ("do-sig") </p>

</div>
</div>
<a class="anchor" id="ad7d24416b687345b68e9820d65e7e5d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_ext_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extendible bucket hash table operations for pre-computed key signature </p>

</div>
</div>
<a class="anchor" id="ac269e0bcf50c9af8feffe44e57101a55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key16_ext_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extendible bucket operations for pre-computed key signature </p>

</div>
</div>
<a class="anchor" id="a522d50bccff9cee7b2902268421b74bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key16_lru_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LRU hash table operations for pre-computed key signature </p>

</div>
</div>
<a class="anchor" id="a9a634b2c3c679da495bf8bdcd03e0ed0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key32_ext_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extendible bucket hash table operations </p>

</div>
</div>
<a class="anchor" id="a32f0eb02dbdab6fba2025d7ae8bede4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key32_lru_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LRU hash table operations for pre-computed key signature </p>

</div>
</div>
<a class="anchor" id="ad0c1c0da2ab6107aeb9d7e865f3dff96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key8_ext_dosig_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extendible bucket hash table operations for key signature computed on lookup ("do-sig") </p>

</div>
</div>
<a class="anchor" id="aeea4db38125897454fcfe2eb6100c329"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key8_ext_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extendible bucket hash table operations for pre-computed key signature </p>

</div>
</div>
<a class="anchor" id="af410aef6de02b248f1dd04c6310ed9d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key8_lru_dosig_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LRU hash table operations for key signature computed on lookup ("do-sig") </p>

</div>
</div>
<a class="anchor" id="abdc5b1949c158c2343327a228db0f0fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_key8_lru_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LRU hash table operations for pre-computed key signature </p>

</div>
</div>
<a class="anchor" id="a7812dfb5832420395fb16489cee12b3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_lru_dosig_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LRU hash table operations for key signature computed on lookup ("do-sig") </p>

</div>
</div>
<a class="anchor" id="a34bd949f43231bf0ce977b90fc02a0c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__table__ops.html">rte_table_ops</a> rte_table_hash_lru_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LRU hash table operations for pre-computed key signature </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
