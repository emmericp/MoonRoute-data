<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>DPDK: lib/librte_sched/rte_sched.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_fcaecf9e47d3074427ceb27ca105ed74.html">lib</a></li><li class="navelem"><a class="el" href="dir_c7c066db16bc3b8df80f3b368dc7c9c3.html">librte_sched</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rte_sched.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="rte__mbuf_8h.html">rte_mbuf.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rte__meter_8h.html">rte_meter.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__sched__subport__params.html">rte_sched_subport_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__sched__subport__stats.html">rte_sched_subport_stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__sched__pipe__params.html">rte_sched_pipe_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__sched__queue__stats.html">rte_sched_queue_stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__sched__port__params.html">rte_sched_port_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrte__sched__port__hierarchy.html">rte_sched_port_hierarchy</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a987eaedb9cd05abdbdb1bf30ed446ac1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a987eaedb9cd05abdbdb1bf30ed446ac1">RTE_SCHED_TRAFFIC_CLASSES_PER_PIPE</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a987eaedb9cd05abdbdb1bf30ed446ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18bd6271b9e6f5beecb651a84b3d328e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a18bd6271b9e6f5beecb651a84b3d328e">RTE_SCHED_QUEUES_PER_TRAFFIC_CLASS</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a18bd6271b9e6f5beecb651a84b3d328e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21bfcaf525e24b9b562a80a894e33245"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a21bfcaf525e24b9b562a80a894e33245">RTE_SCHED_QUEUES_PER_PIPE</a></td></tr>
<tr class="separator:a21bfcaf525e24b9b562a80a894e33245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee01a1e4f782390e5350aaa894b0a54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a9ee01a1e4f782390e5350aaa894b0a54">RTE_SCHED_PIPE_PROFILES_PER_PORT</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a9ee01a1e4f782390e5350aaa894b0a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a223009f8ebd0b9f2d7b56d11201cab8e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a223009f8ebd0b9f2d7b56d11201cab8e">RTE_SCHED_FRAME_OVERHEAD_DEFAULT</a>&#160;&#160;&#160;24</td></tr>
<tr class="separator:a223009f8ebd0b9f2d7b56d11201cab8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a496f8da1e648ee8600897f8c748bf56e"><td class="memItemLeft" align="right" valign="top">struct rte_sched_port *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a496f8da1e648ee8600897f8c748bf56e">rte_sched_port_config</a> (struct <a class="el" href="structrte__sched__port__params.html">rte_sched_port_params</a> *params)</td></tr>
<tr class="separator:a496f8da1e648ee8600897f8c748bf56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab38bf252e231fdf006978ddc5eeb2540"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#ab38bf252e231fdf006978ddc5eeb2540">rte_sched_port_free</a> (struct rte_sched_port *port)</td></tr>
<tr class="separator:ab38bf252e231fdf006978ddc5eeb2540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e51de951a33f798bf28c3437b441b31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a4e51de951a33f798bf28c3437b441b31">rte_sched_subport_config</a> (struct rte_sched_port *port, uint32_t subport_id, struct <a class="el" href="structrte__sched__subport__params.html">rte_sched_subport_params</a> *params)</td></tr>
<tr class="separator:a4e51de951a33f798bf28c3437b441b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f6f073d054faab7e6a9683b8e0fe0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a21f6f073d054faab7e6a9683b8e0fe0f">rte_sched_pipe_config</a> (struct rte_sched_port *port, uint32_t subport_id, uint32_t pipe_id, int32_t pipe_profile)</td></tr>
<tr class="separator:a21f6f073d054faab7e6a9683b8e0fe0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63323938e29256623c574e41af02cc6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#aa63323938e29256623c574e41af02cc6">rte_sched_port_get_memory_footprint</a> (struct <a class="el" href="structrte__sched__port__params.html">rte_sched_port_params</a> *params)</td></tr>
<tr class="separator:aa63323938e29256623c574e41af02cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df7d9f13f9945d315733ed0939508ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a9df7d9f13f9945d315733ed0939508ea">rte_sched_subport_read_stats</a> (struct rte_sched_port *port, uint32_t subport_id, struct <a class="el" href="structrte__sched__subport__stats.html">rte_sched_subport_stats</a> *stats, uint32_t *tc_ov)</td></tr>
<tr class="separator:a9df7d9f13f9945d315733ed0939508ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac732e88980d2146219696389fb210c93"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#ac732e88980d2146219696389fb210c93">rte_sched_queue_read_stats</a> (struct rte_sched_port *port, uint32_t queue_id, struct <a class="el" href="structrte__sched__queue__stats.html">rte_sched_queue_stats</a> *stats, uint16_t *qlen)</td></tr>
<tr class="separator:ac732e88980d2146219696389fb210c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca2b391a678552fdbf4098039e07666"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a9ca2b391a678552fdbf4098039e07666">rte_sched_port_pkt_write</a> (struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> *pkt, uint32_t subport, uint32_t pipe, uint32_t traffic_class, uint32_t queue, enum <a class="el" href="rte__meter_8h.html#a9fdad5fa95e62568e827ab7d0c792f3a">rte_meter_color</a> color)</td></tr>
<tr class="separator:a9ca2b391a678552fdbf4098039e07666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed361b2789fd74b27bc6065e3a5d0f94"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#aed361b2789fd74b27bc6065e3a5d0f94">rte_sched_port_pkt_read_tree_path</a> (struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> *pkt, uint32_t *subport, uint32_t *pipe, uint32_t *traffic_class, uint32_t *queue)</td></tr>
<tr class="separator:aed361b2789fd74b27bc6065e3a5d0f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a326fddd15331c0fd66c7a181a6b43e29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#a326fddd15331c0fd66c7a181a6b43e29">rte_sched_port_enqueue</a> (struct rte_sched_port *port, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **pkts, uint32_t n_pkts)</td></tr>
<tr class="separator:a326fddd15331c0fd66c7a181a6b43e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc84940f2df8eb87e2f80ebb4269ddd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__sched_8h.html#afbc84940f2df8eb87e2f80ebb4269ddd">rte_sched_port_dequeue</a> (struct rte_sched_port *port, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **pkts, uint32_t n_pkts)</td></tr>
<tr class="separator:afbc84940f2df8eb87e2f80ebb4269ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RTE Hierarchical Scheduler</p>
<p>The hierarchical scheduler prioritizes the transmission of packets from different users and traffic classes according to the Service Level Agreements (SLAs) defined for the current network node.</p>
<p>The scheduler supports thousands of packet queues grouped under a 5-level hierarchy:</p><ol type="1">
<li>Port:<ul>
<li>Typical usage: output Ethernet port;</li>
<li>Multiple ports are scheduled in round robin order with equal priority;</li>
</ul>
</li>
<li>Subport:<ul>
<li>Typical usage: group of users;</li>
<li>Traffic shaping using the token bucket algorithm (one bucket per subport);</li>
<li>Upper limit enforced per traffic class at subport level;</li>
<li>Lower priority traffic classes able to reuse subport bandwidth currently unused by higher priority traffic classes of the same subport;</li>
<li>When any subport traffic class is oversubscribed (configuration time event), the usage of subport member pipes with high demand for that traffic class pipes is truncated to a dynamically adjusted value with no impact to low demand pipes;</li>
</ul>
</li>
<li>Pipe:<ul>
<li>Typical usage: individual user/subscriber;</li>
<li>Traffic shaping using the token bucket algorithm (one bucket per pipe);</li>
</ul>
</li>
<li>Traffic class:<ul>
<li>Traffic classes of the same pipe handled in strict priority order;</li>
<li>Upper limit enforced per traffic class at the pipe level;</li>
<li>Lower priority traffic classes able to reuse pipe bandwidth currently unused by higher priority traffic classes of the same pipe;</li>
</ul>
</li>
<li>Queue:<ul>
<li>Typical usage: queue hosting packets from one or multiple connections of same traffic class belonging to the same user;</li>
<li>Weighted Round Robin (WRR) is used to service the queues within same pipe traffic class. </li>
</ul>
</li>
</ol>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a223009f8ebd0b9f2d7b56d11201cab8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTE_SCHED_FRAME_OVERHEAD_DEFAULT&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ethernet framing overhead. Overhead fields per Ethernet frame:</p><ol type="1">
<li>Preamble: 7 bytes;</li>
<li>Start of Frame Delimiter (SFD): 1 byte;</li>
<li>Frame Check Sequence (FCS): 4 bytes;</li>
<li>Inter Frame Gap (IFG): 12 bytes. The FCS is considered overhead only if not included in the packet length (field pkt.pkt_len of struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a>). </li>
</ol>

</div>
</div>
<a class="anchor" id="a9ee01a1e4f782390e5350aaa894b0a54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTE_SCHED_PIPE_PROFILES_PER_PORT&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum number of pipe profiles that can be defined per port. Compile-time configurable. </p>

</div>
</div>
<a class="anchor" id="a21bfcaf525e24b9b562a80a894e33245"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTE_SCHED_QUEUES_PER_PIPE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(<a class="code" href="rte__sched_8h.html#a987eaedb9cd05abdbdb1bf30ed446ac1">RTE_SCHED_TRAFFIC_CLASSES_PER_PIPE</a> *     <a class="code" href="rte__sched_8h.html#a18bd6271b9e6f5beecb651a84b3d328e">\</a></div>
<div class="line"><a class="code" href="rte__sched_8h.html#a18bd6271b9e6f5beecb651a84b3d328e">	RTE_SCHED_QUEUES_PER_TRAFFIC_CLASS</a>)</div>
<div class="ttc" id="rte__sched_8h_html_a18bd6271b9e6f5beecb651a84b3d328e"><div class="ttname"><a href="rte__sched_8h.html#a18bd6271b9e6f5beecb651a84b3d328e">RTE_SCHED_QUEUES_PER_TRAFFIC_CLASS</a></div><div class="ttdeci">#define RTE_SCHED_QUEUES_PER_TRAFFIC_CLASS</div><div class="ttdef"><b>Definition:</b> rte_sched.h:92</div></div>
<div class="ttc" id="rte__sched_8h_html_a987eaedb9cd05abdbdb1bf30ed446ac1"><div class="ttname"><a href="rte__sched_8h.html#a987eaedb9cd05abdbdb1bf30ed446ac1">RTE_SCHED_TRAFFIC_CLASSES_PER_PIPE</a></div><div class="ttdeci">#define RTE_SCHED_TRAFFIC_CLASSES_PER_PIPE</div><div class="ttdef"><b>Definition:</b> rte_sched.h:89</div></div>
</div><!-- fragment --><p>Number of queues per pipe. </p>

</div>
</div>
<a class="anchor" id="a18bd6271b9e6f5beecb651a84b3d328e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTE_SCHED_QUEUES_PER_TRAFFIC_CLASS&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of queues per pipe traffic class. Cannot be changed. </p>

</div>
</div>
<a class="anchor" id="a987eaedb9cd05abdbdb1bf30ed446ac1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RTE_SCHED_TRAFFIC_CLASSES_PER_PIPE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Random Early Detection (RED) Number of traffic classes per pipe (as well as subport). Cannot be changed. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a21f6f073d054faab7e6a9683b8e0fe0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_sched_pipe_config </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>subport_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pipe_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>pipe_profile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler pipe configuration</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
    <tr><td class="paramname">subport_id</td><td>Subport ID </td></tr>
    <tr><td class="paramname">pipe_id</td><td>Pipe ID within subport </td></tr>
    <tr><td class="paramname">pipe_profile</td><td>ID of port-level pre-configured pipe profile </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, error code otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a496f8da1e648ee8600897f8c748bf56e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rte_sched_port* rte_sched_port_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__sched__port__params.html">rte_sched_port_params</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler port configuration</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Port scheduler configuration parameter structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to port scheduler instance upon success or NULL otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="afbc84940f2df8eb87e2f80ebb4269ddd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_sched_port_dequeue </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>pkts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_pkts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler port dequeue. Reads up to n_pkts from the port scheduler and stores them in the pkts array and returns the number of packets actually read. The pkts array needs to be pre-allocated by the caller with at least n_pkts entries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
    <tr><td class="paramname">pkts</td><td>Pre-allocated packet descriptor array where the packets dequeued from the port scheduler should be stored </td></tr>
    <tr><td class="paramname">n_pkts</td><td>Number of packets to dequeue from the port scheduler </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of packets successfully dequeued and placed in the pkts array </dd></dl>

</div>
</div>
<a class="anchor" id="a326fddd15331c0fd66c7a181a6b43e29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_sched_port_enqueue </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>pkts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_pkts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler port enqueue. Writes up to n_pkts to port scheduler and returns the number of packets actually written. For each packet, the port scheduler queue to write the packet to is identified by reading the hierarchy path from the packet descriptor; if the queue is full or congested and the packet is not written to the queue, then the packet is automatically dropped without any action required from the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
    <tr><td class="paramname">pkts</td><td>Array storing the packet descriptor handles </td></tr>
    <tr><td class="paramname">n_pkts</td><td>Number of packets to enqueue from the pkts array into the port scheduler </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of packets successfully enqueued </dd></dl>

</div>
</div>
<a class="anchor" id="ab38bf252e231fdf006978ddc5eeb2540"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rte_sched_port_free </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler port free</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa63323938e29256623c574e41af02cc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rte_sched_port_get_memory_footprint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__sched__port__params.html">rte_sched_port_params</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler memory footprint size per port</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Port scheduler configuration parameter structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Memory footprint size in bytes upon success, 0 otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="aed361b2789fd74b27bc6065e3a5d0f94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rte_sched_port_pkt_read_tree_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>subport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>traffic_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Scheduler hierarchy path read from packet descriptor (struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a>). Typically called as part of the hierarchical scheduler enqueue operation. The subport, pipe, traffic class and queue parameters need to be pre-allocated by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>Packet descriptor handle </td></tr>
    <tr><td class="paramname">subport</td><td>Subport ID </td></tr>
    <tr><td class="paramname">pipe</td><td>Pipe ID within subport </td></tr>
    <tr><td class="paramname">traffic_class</td><td>Traffic class ID within pipe (0 .. 3) </td></tr>
    <tr><td class="paramname">queue</td><td>Queue ID within pipe traffic class (0 .. 3) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9ca2b391a678552fdbf4098039e07666"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rte_sched_port_pkt_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>subport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>traffic_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="rte__meter_8h.html#a9fdad5fa95e62568e827ab7d0c792f3a">rte_meter_color</a>&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Scheduler hierarchy path write to packet descriptor. Typically called by the packet classification stage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>Packet descriptor handle </td></tr>
    <tr><td class="paramname">subport</td><td>Subport ID </td></tr>
    <tr><td class="paramname">pipe</td><td>Pipe ID within subport </td></tr>
    <tr><td class="paramname">traffic_class</td><td>Traffic class ID within pipe (0 .. 3) </td></tr>
    <tr><td class="paramname">queue</td><td>Queue ID within pipe traffic class (0 .. 3) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac732e88980d2146219696389fb210c93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_sched_queue_read_stats </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>queue_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__sched__queue__stats.html">rte_sched_queue_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>qlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler queue statistics read</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
    <tr><td class="paramname">queue_id</td><td>Queue ID within port scheduler </td></tr>
    <tr><td class="paramname">stats</td><td>Pointer to pre-allocated subport statistics structure where the statistics counters should be stored </td></tr>
    <tr><td class="paramname">qlen</td><td>Pointer to pre-allocated variable where the current queue length should be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, error code otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a4e51de951a33f798bf28c3437b441b31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_sched_subport_config </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>subport_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__sched__subport__params.html">rte_sched_subport_params</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler subport configuration</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
    <tr><td class="paramname">subport_id</td><td>Subport ID </td></tr>
    <tr><td class="paramname">params</td><td>Subport configuration parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, error code otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a9df7d9f13f9945d315733ed0939508ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_sched_subport_read_stats </td>
          <td>(</td>
          <td class="paramtype">struct rte_sched_port *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>subport_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__sched__subport__stats.html">rte_sched_subport_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tc_ov</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hierarchical scheduler subport statistics read</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Handle to port scheduler instance </td></tr>
    <tr><td class="paramname">subport_id</td><td>Subport ID </td></tr>
    <tr><td class="paramname">stats</td><td>Pointer to pre-allocated subport statistics structure where the statistics counters should be stored </td></tr>
    <tr><td class="paramname">tc_ov</td><td>Pointer to pre-allocated 4-entry array where the oversubscription status for each of the 4 subport traffic classes should be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success, error code otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
